{"version":3,"sources":["webpack:///E:/HBuilderProjects/HBuilderxProjects/eShop/main.js","webpack:///E:/HBuilderProjects/HBuilderxProjects/eShop/pages/travels/travels.vue?4b8a","webpack:///E:/HBuilderProjects/HBuilderxProjects/eShop/pages/travels/travels.vue?5572","webpack:///E:/HBuilderProjects/HBuilderxProjects/eShop/pages/travels/travels.vue?9ab0","webpack:///E:/HBuilderProjects/HBuilderxProjects/eShop/pages/travels/travels.vue?4634","webpack:///E:/HBuilderProjects/HBuilderxProjects/eShop/pages/travels/travels.vue","webpack:///E:/HBuilderProjects/HBuilderxProjects/eShop/pages/travels/travels.vue?2be4","webpack:///E:/HBuilderProjects/HBuilderxProjects/eShop/pages/travels/travels.vue?d6fa"],"names":["createPage","Page","util","require","time","formatTime","Date","db","wx","cloud","database","users","collection","name","components","HMmessages","motal","data","num","fication","uploadvideos","watchaddress","classdata","titledata","tipsdata","topimg","videos","address","avatarUrl","nickName","openid","reldata","relend","methods","menubtn","index","uploadImg","uni","chooseImage","count","sizeType","sourceType","success","res","console","log","tempFilePaths","push","deleteImg","splice","preImage","imglist","then","catch","err","uploadVideo","showLoading","title","chooseVideo","maxDuration","tempFilePath","hideLoading","deleteVideo","addRess","city","result","address_reference","landmark_l2","chooseCity","navigateTo","url","suBmitd","proMpt","length","userinfo","get","message","$nextTick","$refs","mon","init","usermen","_openid","userdata","staticImg","staticimg","staticVideo","staticvideo","cloudData","imgfileID","Promise","resolve","reject","forEach","img","imgion","lastIndexOf","eximg","slice","cloudpath","now","Math","floor","random","uploadFile","cloudPath","filePath","fileID","error","videoion","exvideo","datas","add","datainfo","tip","show","icon","iconColor","fontColor","background","created","computed","travecity","traveing","watch","newValue","oldValue"],"mappings":"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","file":"pages/travels/travels.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/travels/travels.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./travels.vue?vue&type=template&id=f2510b80&scoped=true&\"\nvar renderjs\nimport script from \"./travels.vue?vue&type=script&lang=js&\"\nexport * from \"./travels.vue?vue&type=script&lang=js&\"\nimport style0 from \"./travels.vue?vue&type=style&index=0&id=f2510b80&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f2510b80\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HbuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('f2510b80')) {\n      api.createRecord('f2510b80', component.options)\n    } else {\n      api.reload('f2510b80', component.options)\n    }\n    module.hot.accept(\"./travels.vue?vue&type=template&id=f2510b80&scoped=true&\", function () {\n      api.rerender('f2510b80', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"HBuilderProjects/HBuilderxProjects/eShop/pages/travels/travels.vue\"\nexport default component.exports","export * from \"-!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./travels.vue?vue&type=template&id=f2510b80&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.HMmessages = _vm.$refs.HMmessages\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./travels.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./travels.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport {preview,addressdata} from '../../common/list.js'\r\nimport {mapState} from 'vuex'\r\n//引入消息提示插件\r\n import HMmessages from \"@/components/HM-messages/HM-messages.vue\"\r\n //引入模态框\r\n import motal from '../../element/model.vue'\r\n var util =require('../../common/util.js');\r\n var time = util.formatTime(new Date());\r\n //定义数据库\r\n var db = wx.cloud.database()\r\n var users = db.collection('user')\r\n \r\nexport default {\r\n\tname: 'travels',\r\n\tcomponents: {HMmessages,motal},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tnum: 0,\r\n\t\t\tfication: [\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\":'心情'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\":'书籍资料'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\":'食品'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\":'生活'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\":'手机'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\":'电子'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\":'彩妆'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\":'男装'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\":'女装'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"name\":'其他'\r\n\t\t\t\t},\r\n\t\t\t],\r\n\r\n\t\t\tuploadvideos: false,\r\n\t\t\twatchaddress: '',\r\n\t\t\tclassdata: '心情', //分类\r\n\t\t\ttitledata: '', //标题\r\n\t\t\ttipsdata: '', //描述\r\n\t\t\ttopimg: [], //上传的图片\r\n\t\t\tvideos: '', //上传的视频\r\n\t\t\taddress: '', //选择的城市\r\n\t\t\tavatarUrl: '', // 用户头像\r\n\t\t\tnickName: '', // 用户昵称\r\n\t\t\topenid: '', // 用户openid\r\n\t\t\t// 提示用户正在发布\r\n\t\t\treldata: '正在发布...请勿关闭该页面',\r\n\t\t\trelend: false\r\n\t\t};\r\n\t},\r\n\tmethods:{\r\n\t\t//点击分类切换\r\n\t\tmenubtn(index,name){\r\n\t\t\tthis.num = index\r\n\t\t\tthis.classdata = name\r\n\t\t},\r\n\t\t//上传图片\r\n\t\tuploadImg(){\r\n\t\t\tuni.chooseImage({\r\n\t\t\t    count: 9, //默认9\r\n\t\t\t    sizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t    sourceType: ['album'], //从相册选择\r\n\t\t\t    success: (res)=> {\r\n\t\t\t        console.log(...res.tempFilePaths);\r\n\t\t\t\t\tthis.topimg.push(...res.tempFilePaths)\r\n\t\t\t\t\t\r\n\t\t\t    }\r\n\t\t\t});\r\n\t\t},\r\n\t\t//删除图片\r\n\t\tdeleteImg(index){\r\n\t\t\tthis.topimg.splice(index,1)\r\n\t\t},\r\n\t\t//预览图片\r\n\t\tpreImage(index){\r\n\t\t\t// 预览图片\r\n\t\t\tlet imglist = this.topimg\r\n\t\t\tpreview(index,imglist)\r\n\t\t\t.then((res)=>{\r\n\t\t\t\tconsole.log('预览成功')\r\n\t\t\t})\r\n\t\t\t.catch((err)=>{\r\n\t\t\t\tconsole.log('预览失败')\r\n\t\t\t})\r\n\t\t},\r\n\t\t//上传视频\r\n\t\tuploadVideo(){\r\n\t\t\tuni.showLoading({\r\n\t\t\t    title: '上传中'\r\n\t\t\t});\r\n\t\t\tuni.chooseVideo({\r\n\t\t\t\tcount: 1,\r\n\t\t\t\tsourceType: ['camera', 'album'],\r\n\t\t\t\tmaxDuration:20,\r\n\t\t\t})\r\n\t\t\t.then((res)=>{\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tthis.videos = res[1].tempFilePath\r\n\t\t\t\tthis.uploadvideos = true\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t})\r\n\t\t\t.catch((err)=>{\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\t\t},\r\n\t\t//删除视频\r\n\t\tdeleteVideo(){\r\n\t\t\tthis.videos = ''\r\n\t\t\tthis.uploadvideos = false\r\n\t\t},\r\n\t\t//定位\r\n\t\taddRess(){\r\n\t\t\taddressdata()\r\n\t\t\t.then((res)=>{\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tlet city = res.result.address_reference.landmark_l2.title\r\n\t\t\t\tthis.address = city\r\n\t\t\t})\r\n\t\t\t.catch((err)=>{\r\n\t\t\t\tconsole.log(\"用户拒绝定位\")\r\n\t\t\t\tthis.address = '新校区'\r\n\t\t\t})\r\n\t\t},\r\n\t\t//跳转到选择城市页面\r\n\t\tchooseCity(){\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl:'../city/city'\r\n\t\t\t})\r\n\t\t},\r\n\t\t//点击获取数据上传\r\n\t\tsuBmitd(){\r\n\t\t\tconsole.log(123456)\r\n\t\t\tconsole.log(this.classdata)\r\n\t\t\tconsole.log(this.titledata)\r\n\t\t\tconsole.log(this.tipsdata)\r\n\t\t\tconsole.log(this.topimg)\r\n\t\t\tconsole.log(this.videos)\r\n\t\t\tconsole.log(this.address)\r\n\t\t\tif(this.titledata == ''){\r\n\t\t\t\tthis.proMpt('标题必填')\r\n\t\t\t}else if(this.tipsdata == ''){\r\n\t\t\t\tthis.proMpt('描述必填')\r\n\t\t\t}else if(this.topimg.length<3){\r\n\t\t\t\tthis.proMpt('上传图片不少于三张')\r\n\t\t\t}else{\r\n\t\t\t\t//判断用户是否登录\r\n\t\t\t\tthis.userinfo()\r\n\t\t\t}\r\n\t\t},\r\n\t\t//判断用户是否登录\r\n\t\tuserinfo(){\r\n\t\t\t//请求数据库查看用户是否登录\r\n\t\t\tusers.get()\r\n\t\t\t.then((res)=>{\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\t//length==0 用户未登录\r\n\t\t\t\tif(res.data.length == 0){\r\n\t\t\t\t\tconsole.log('用户未登录')\r\n\t\t\t\t\t//弹出模态框\r\n\t\t\t\t\tlet message = '请登录后再操作'\r\n\t\t\t\t\tthis.$nextTick(()=>{    //DOM更新循环结束时的循环回调\r\n\t\t\t\t\t\tthis.$refs.mon.init(message)\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.log('用户已登录')\r\n\t\t\t\t\tlet usermen = res.data[0]\r\n\t\t\t\t\tthis.avatarUrl = usermen.avatarUrl\r\n\t\t\t\t\tthis.nickName = usermen.nickName\r\n\t\t\t\t\tthis.openid = usermen._openid\r\n\t\t\t\t\t//上传用户提交到数据库\r\n\t\t\t\t\tthis.userdata()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((err)=>{\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\t\t},\r\n\t\t\r\n\t\t//用户上传数据到数据库：1.上传图片到云存储 2.上传视频到云存储 3.上传所有数据到数据库\r\n\t\tasync userdata(){\r\n\t\t\t//先等待图片上传到云存储\r\n\t\t\tlet staticimg = await this.staticImg()\r\n\t\t\tconsole.log(staticimg)\r\n\t\t\t//等待视频上传到云存储\r\n\t\t\tlet staticvideo = await this.staticVideo()\r\n\t\t\tconsole.log(staticvideo)\r\n\t\t\t//把用户填写的数据一并提交到数据库\r\n\t\t\tawait this.cloudData(staticimg,staticvideo)\r\n\t\t},\r\n\t\t\r\n\t\t//图片上传到云存储\r\n\t\tstaticImg(){\r\n\t\t\t//将上传成功的图片放在一个数组中\r\n\t\t\tvar imgfileID = []\r\n\t\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\t\tthis.topimg.forEach((img)=>{\r\n\t\t\t\t\tconsole.log(img)\r\n\t\t\t\t\t//随机字符串，拼接图片名称，防止同名文件产生，而被后一个文件覆盖\r\n\t\t\t\t\tlet imgion = img.lastIndexOf('.')\r\n\t\t\t\t\tlet eximg = img.slice(imgion)\r\n\t\t\t\t\tlet cloudpath = `${Date.now()}-${Math.floor(Math.random(0,1)*10000000)}${eximg}`\r\n\t\t\t\t\tconsole.log(cloudpath)\r\n\t\t\t\t\twx.cloud.uploadFile({\r\n\t\t\t\t\t  cloudPath: 'static/' + cloudpath,\r\n\t\t\t\t\t  filePath: img, // 文件路径\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t  // console.log('图片上传完成')\r\n\t\t\t\t\t  imgfileID.push(res.fileID)\r\n\t\t\t\t\t  // console.log(imgfileID)\r\n\t\t\t\t\t  // 判断云存储返回的图片是否和用户上传的图片一样多\r\n\t\t\t\t\t  if(imgfileID.length == this.topimg.length){\r\n\t\t\t\t\t\t  resolve(imgfileID)\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t},\r\n\t\t//视频上传到云存储\r\n\t\tstaticVideo(){\r\n\t\t\treturn new Promise((resolve,reject)=>{\r\n\t\t\t\t//判断用户你是否上传视频\r\n\t\t\t\tif(this.videos == ''){\r\n\t\t\t\t\tconsole.log('用户不上传视频')\r\n\t\t\t\t\tresolve('')\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.log('用户要上传')\r\n\t\t\t\t\t//随机字符串，拼接图片名称，防止同名文件产生，而被后一个文件覆盖\r\n\t\t\t\t\tlet videoion = this.videos.lastIndexOf('.')\r\n\t\t\t\t\tlet exvideo = this.videos.slice(videoion)\r\n\t\t\t\t\tlet cloudpath = `${Date.now()}-${Math.floor(Math.random(0,1)*10000000)}${exvideo}`\r\n\t\t\t\t\tconsole.log(cloudpath)\r\n\t\t\t\t\twx.cloud.uploadFile({\r\n\t\t\t\t\t  cloudPath: 'staticVideo/' + cloudpath,\r\n\t\t\t\t\t  filePath: this.videos, // 文件路径\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t  // console.log('视频上传完成')\r\n\t\t\t\t\t  resolve(res.fileID)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(error => {\r\n\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t//把用户填写的数据一并提交到数据库\r\n\t\tcloudData(staticimg,staticvideo){\r\n\t\t\tlet datas = {\r\n\t\t\t\tclassdata: this.classdata,  //分类\r\n\t\t\t\ttitledata: this.titledata,  //标题\r\n\t\t\t\ttipsdata: this.tipsdata,\t//描述\r\n\t\t\t\ttopimg: staticimg,\t\t\t//图片\r\n\t\t\t\tvideos: staticvideo,\t\t//视频\r\n\t\t\t\taddress: this.address,\t\t//定位\r\n\t\t\t\tavatarUrl: this.avatarUrl,\t//头像\r\n\t\t\t\tnickName: this.nickName,\t//用户昵称\r\n\t\t\t\topenid: this.openid,\t\t//用户标识\r\n\t\t\t\ttime:time,\t\t\t\t\t//创建时间\r\n\t\t\t}\r\n\t\t\tdb.collection('userdata').add({\r\n\t\t\t\t//data表示要上传的数据\r\n\t\t\t\tdata:{\r\n\t\t\t\t\tdatainfo:datas\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then((res)=>{\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t})\r\n\t\t\t.catch((err)=>{\r\n\t\t\t\tconsole.log(err)\r\n\t\t\t})\r\n\t\t},\r\n\t\t\r\n\t\t//及时反馈\r\n\t\tproMpt(tip){\r\n\t\t\tthis.HMmessages.show(tip,{\r\n\t\t\t\ticon:'error',\r\n\t\t\t\ticonColor:'#ffffff',\r\n\t\t\t\tfontColor:'#ffffff',\r\n\t\t\t\tbackground:'rgba(102,0,21,0.8)'\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t},\r\n\tcreated() {\r\n\t\t//定位\r\n\t\tthis.addRess()\r\n\t},\r\n\t//计算属性\r\n\tcomputed:{\r\n\t\t...mapState(['travecity']),\r\n\t\tcount(){\r\n\t\t\tthis.watchaddress = this.travecity.traveing\r\n\t\t}\r\n\t},\r\n\t//侦听器\r\n\twatch:{\r\n\t\twatchaddress(newValue,oldValue){\r\n\t\t\tconsole.log(newValue)\r\n\t\t\tthis.address = newValue\r\n\t\t}\r\n\t}\r\n};\r\n","import mod from \"-!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./travels.vue?vue&type=style&index=0&id=f2510b80&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HbuilderX/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./travels.vue?vue&type=style&index=0&id=f2510b80&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}